(this.webpackJsonpsmartathome=this.webpackJsonpsmartathome||[]).push([[6],{179:function(e,t,s){"use strict";var r=s(173),a=s(255);t.a=function(e){return!Object(r.a)(e)&&!Object(a.a)(e)}},181:function(e,t,s){"use strict";var r=s(1),a=s(16),n=(s(240),s(2));t.a=function(e){var t=Object(r.useContext)(a.a).theme;return Object(n.jsxs)("div",{className:"w-11/12 sm:w-3/4 md:w-5/6 ml-auto mr-auto h-auto bg-".concat(t," border border-red-400 text-red-700 mt-5 px-4 py-2 rounded relative"),role:"alert",children:[Object(n.jsx)("span",{className:"w-5/6 block break-words text-sm",children:e.errorMessage}),e.showCloseBtn&&Object(n.jsx)("span",{className:"absolute top-0 bottom-0 right-0 ml-3 mr-1",onClick:e.closeError,children:Object(n.jsxs)("svg",{className:"fill-current h-6 w-6 text-red-500 close-icon",role:"button",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:[Object(n.jsx)("title",{children:"Close"}),Object(n.jsx)("path",{d:"M14.348 14.849a1.2 1.2 0 0 1-1.697 0L10 11.819l-2.651 3.029a1.2 1.2 0 1 1-1.697-1.697l2.758-3.15-2.759-3.152a1.2 1.2 0 1 1 1.697-1.697L10 8.183l2.651-3.031a1.2 1.2 0 1 1 1.697 1.697l-2.758 3.152 2.758 3.15a1.2 1.2 0 0 1 0 1.698z"})]})})]})}},182:function(e,t,s){"use strict";s.d(t,"a",(function(){return o})),s.d(t,"b",(function(){return i}));var r=s(7),a=s(1),n=s.n(a),c=s(2),o=n.a.createContext({weatherUnit:"C"}),i=function(e){var t=e.children,s=Object(a.useState)("C"),n=Object(r.a)(s,2),i=n[0],d=n[1];return Object(a.useEffect)((function(){localStorage.getItem("unit")?d(JSON.parse(localStorage.getItem("unit"))):localStorage.setItem("unit",JSON.stringify("C"))}),[]),Object(c.jsx)(o.Provider,{value:{weatherUnit:i,updateWeatherUnit:function(e){d(e),localStorage.setItem("unit",JSON.stringify(e))}},children:t})}},183:function(e,t,s){"use strict";s.d(t,"a",(function(){return y})),s.d(t,"b",(function(){return w}));var r=s(215),a=s(96),n=s.n(a),c=s(177),o=s(184),i=s(190),d=s(191),l=s(194),u=s(193),h=s(1),j=s.n(h),f=s(182),b=s(185),p=s.n(b),x=s(261),m=(s(205),function(){var e=Object(c.a)(n.a.mark((function e(){var t,s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.get("https://ipapi.co/json");case 3:return t=e.sent,s=t.data,e.abrupt("return",s);case 8:e.prev=8,e.t0=e.catch(0),x.a(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()),v=s(179),g=s(255),O=s(2),y=j.a.createContext(null),w=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(i.a)(this,s);for(var a=arguments.length,d=new Array(a),l=0;l<a;l++)d[l]=arguments[l];return(e=t.call.apply(t,[this].concat(d))).updateState=function(t){e.setState(Object(o.a)({},t))},e.updateFavorites=function(t){e.setState(Object(o.a)({},t))},e.state={showLoader:!0,address:{cityName:"",cityId:""},latlong:null,favorites:[],updateState:e.updateState,updateFavorites:e.updateFavorites},e.formatCoords=function(e,t){return"".concat(t,",").concat(e)},e.updateAddress=function(){var t=Object(c.a)(n.a.mark((function t(s){var r,a,c,o;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={},t.prev=1,t.next=4,p.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(s,".json?access_token=pk.eyJ1IjoiZGVyZWNoMWUiLCJhIjoiY2t0NjA1MWEyMGRzZjJwanB1NzkxdnhoMiJ9.XCZgdSBLLFhVMn2ZEH7rDQ&language=de"));case 4:a=t.sent.data.features,r=a[0],Object(v.a)(r)&&(c=r.place_name_de,o=r.id?r.id:"",e.updateState({showLoader:!1,address:{cityName:c,cityId:o},latlong:s})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),x.a(t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),e.getIPAddress=Object(c.a)(n.a.mark((function t(){var s,r,a,c,o,i,d,l,u;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,m();case 3:s=t.sent,Object(v.a)(s)?(r=s.latitude,a=s.longitude,c=s.city,o=s.region,i=s.country_name,d="".concat(c,", ").concat(o,", ").concat(i),l=Object(g.a)(r)||isNaN(Number(r))?"00":r,u=Object(g.a)(a)||isNaN(Number(a))?"00":a,e.updateState({showLoader:!1,address:{cityName:d},latlong:e.formatCoords(u,l)})):e.updateState({showLoader:!1}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),x.a(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.getAddress=Object(c.a)(n.a.mark((function t(){return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(){var t=Object(c.a)(n.a.mark((function t(s){var r;return n.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.formatCoords(s.coords.latitude,s.coords.longitude),e.updateAddress(r);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),(function(t){console.error(t),e.getIPAddress()})):e.getIPAddress();case 1:case"end":return t.stop()}}),t)}))),e.getFavorites=function(){localStorage.getItem("favorites")&&e.setState({favorites:Object(r.a)(JSON.parse(localStorage.getItem("favorites")))})},e}return Object(d.a)(s,[{key:"componentDidMount",value:function(){this.getAddress(),this.getFavorites()}},{key:"render",value:function(){return Object(O.jsx)(y.Provider,{value:this.state,children:this.props.children})}}]),s}(h.Component);w.contextType=f.a},189:function(e,t,s){"use strict";s.d(t,"a",(function(){return u}));var r=s(190),a=s(191),n=s(194),c=s(193),o=s(1),i=s(181),d=s(261),l=s(2),u=function(e){Object(n.a)(s,e);var t=Object(c.a)(s);function s(){var e;Object(r.a)(this,s);for(var a=arguments.length,n=new Array(a),c=0;c<a;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={hasError:!1,eventId:null},e}return Object(a.a)(s,[{key:"componentDidCatch",value:function(e,t){var s=this;d.b((function(r){r.setExtras(t);var a=d.a(e);s.setState({eventId:a})}))}},{key:"render",value:function(){return Object(l.jsx)("div",{children:this.state.hasError?Object(l.jsxs)("div",{className:"flex",children:[Object(l.jsx)("div",{className:"w-1/6"}),Object(l.jsx)("div",{className:"flex-col w-2/3 justify-center text-center",children:Object(l.jsx)(i.a,{errorMessage:"Etwas ist schief gelaufen. Seite aktualisieren!"})})]}):this.props.children})}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),s}(o.Component)},205:function(e,t,s){"use strict";s(179)},239:function(e,t,s){},240:function(e,t,s){},262:function(e,t,s){"use strict";s.r(t);var r=s(1),a=s.n(r),n=s(96),c=s.n(n),o=s(177),i=s(190),d=s(191),l=s(194),u=s(193),h=s(185),j=s.n(h),f=s(204),b=s.n(f),p=(s(239),s(16)),x=s(2),m=function(e){var t=e.address,s=e.selectedAddressIndex,a=e.index,n=e.addressSelected,c=Object(r.useContext)(p.a),o=c.theme,i=c.colorTheme;return Object(x.jsx)("p",{className:"px-5 py-1 cursor-pointer item hover:text-".concat(o," hover:bg-").concat(i," ").concat(a===s?"text-".concat(o," bg-").concat(i):"text-".concat(i)),onClick:n,children:t.cityName})},v=s(97),g=s(181),O=s(183),y=s(209),w=s(244),S=function(e){var t=e.type,s=e.color,r={search:Object(x.jsx)(y.b,{}),up:Object(x.jsx)(w.b,{}),down:Object(x.jsx)(w.a,{})};return Object(x.jsx)("p",{className:"opacity-75 text-2xl fill-".concat(s),children:r[t]})},k=function(e){var t=Object(r.useContext)(p.a),s=t.theme,a=t.colorTheme;return Object(x.jsx)("div",{className:"h-12 mx-5 mt-5",children:Object(x.jsxs)("div",{className:"relative",children:[Object(x.jsx)("div",{className:"absolute top-0 left-0 ml-5 mt-3",children:Object(x.jsx)(S,{type:"search",color:a})}),Object(x.jsx)("input",{style:{backgroundColor:"".concat("dark"===s?"#3a3a3a":"#e2e8f0"),letterSpacing:"0.05em"},className:"data-hj-whitelist block appearance-none w-full border-none rounded-full shadow py-3 pl-12 pr-6 mb-3 leading-tight focus:outline-none focus:bg-gray-200 truncate placeholder-gray-500 text-".concat(a),id:"grid-first-name",type:"text",placeholder:"Stadtname oder PLZ eingeben",onChange:e.citySearch,onKeyDown:e.keyPressed,tabIndex:"0",value:e.city}),e.showCaret?Object(x.jsx)("div",{className:"flex right-0 absolute top-0 mr-4 mt-3 cursor-pointer",onClick:e.caretClicked,children:e.showAddresses?Object(x.jsx)(S,{type:"up",color:a}):Object(x.jsx)(S,{type:"down",color:a})}):null]})})},N=s(261),C=(s(205),s(179)),A=s(265),I=s(255);b()(j.a,{retryDelay:b.a.exponentialDelay});var M=function(e){Object(l.a)(s,e);var t=Object(u.a)(s);function s(){var e;Object(i.a)(this,s);for(var r=arguments.length,n=new Array(r),d=0;d<r;d++)n[d]=arguments[d];return(e=t.call.apply(t,[this].concat(n))).listRef=a.a.createRef(void 0),e.state={showCaret:!1,showAddresses:!1,showLoader:!1,city:"",addresses:[],selectedAddressIndex:0,scrollOffset:0,errorMessage:""},e.debounceAddress=Object(A.a)(e.getAddresses,1e3),e.searchCity=function(t){e.setState({city:t.target.value,errorMessage:""}),e.debounceAddress()},e.toggleAddresses=function(){e.setState((function(e){return{showAddresses:!e.showAddresses}}))},e.setCity=function(){var t=Object(o.a)(c.a.mark((function t(s){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s&&(e.setState({city:s.cityName.split(",")[0],showAddresses:!1}),e.context.updateState({address:s,latlong:s.latlong}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.keyCodeHandler=function(t){t.keyCode&&(38===t.keyCode?(e.setState((function(e){return{selectedAddressIndex:Math.max(0,e.selectedAddressIndex-1)}})),e.listRef.current.scrollTo({left:0,top:e.state.selectedAddressIndex<6?0:30*e.state.selectedAddressIndex,behavior:"auto"})):40===t.keyCode&&(e.setState((function(t){return{selectedAddressIndex:Math.min(t.selectedAddressIndex+1,e.state.addresses.length-1)}})),e.listRef.current.scrollTo({left:0,top:30*e.state.selectedAddressIndex,behavior:"auto"})))},e}return Object(d.a)(s,[{key:"handleError",value:function(e){this.setState({errorMessage:e})}},{key:"getAddresses",value:function(){var e=Object(o.a)(c.a.mark((function e(){var t,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.city.trim()){e.next=19;break}return e.prev=1,this.setState({showLoader:!0}),Object(I.a)(this.context.latlong)||isNaN(Number(this.context.latlong))?"00,00":this.context.latlong,e.next=6,j.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(this.state.city,".json?access_token=pk.eyJ1IjoiZGVyZWNoMWUiLCJhIjoiY2t0NjA1MWEyMGRzZjJwanB1NzkxdnhoMiJ9.XCZgdSBLLFhVMn2ZEH7rDQ&language=de"));case 6:t=e.sent.data.features,Object(C.a)(t)?(s=t.map((function(e){var t=e.place_name_de,s=e.geometry.coordinates[0],r=e.geometry.coordinates[1];return{cityName:t,cityId:e.objectID,latlong:"".concat(s,",").concat(r)}})),this.setState({addresses:s,showCaret:!0,showAddresses:!0,errorMessage:""})):(this.setState({showAddresses:!1}),this.handleError("Keine passenden St\xe4dte gefunden!")),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),N.a(e.t0),this.handleError("Etwas ist schief gegangen. Bitte versuche es mit einer anderen Stadt!");case 14:return e.prev=14,this.setState({showLoader:!1,selectedAddressIndex:0}),e.finish(14);case 17:e.next=20;break;case 19:this.clearState();case 20:case"end":return e.stop()}}),e,this,[[1,10,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"clearState",value:function(){this.setState({showCaret:!1,showAddresses:!1,showLoader:!1,addresses:[],selectedAddressIndex:0,errorMessage:""})}},{key:"render",value:function(){var e=this;return Object(x.jsxs)(r.Fragment,{children:[Object(x.jsx)("div",{className:"flex justify-center mt-5",children:Object(x.jsx)("div",{className:"w-full sm:w-5/6 md:w-2/3 xl:max-w-5xl",children:Object(x.jsx)(k,{city:this.state.city,showCaret:this.state.showCaret,showAddresses:this.state.showAddresses,citySearch:this.searchCity,keyPressed:this.keyCodeHandler,caretClicked:this.toggleAddresses})})}),Object(x.jsx)("div",{className:"flex justify-center",children:Object(x.jsxs)("div",{className:"w-full sm:w-5/6 md:w-2/3 xl:max-w-5xl",children:[this.state.showLoader?Object(x.jsx)(v.a,{}):this.state.showAddresses&&Object(x.jsx)("div",{className:"mx-10 mt-0 border-solid border-2 border-gray-400 rounded-b-xl address-list",ref:this.listRef,children:this.state.addresses.map((function(t,s){return Object(x.jsx)(m,{address:t,selectedAddressIndex:e.state.selectedAddressIndex,index:s,addressSelected:function(){return e.setCity(t)}},s)}))}),this.state.errorMessage.length>0&&Object(x.jsx)("div",{className:"flex justify-center",children:Object(x.jsx)("div",{className:"w-5/6",children:Object(x.jsx)(g.a,{errorMessage:this.state.errorMessage,showCloseBtn:!0,closeError:function(){e.setState({errorMessage:""})}})})})]})})]})}}]),s}(r.Component);M.contextType=O.a;var L=s(182),E=s(189),J=Object(r.lazy)((function(){return Promise.all([s.e(0),s.e(1),s.e(9)]).then(s.bind(null,258))})),P=Object(r.lazy)((function(){return Promise.all([s.e(0),s.e(7),s.e(1),s.e(8)]).then(s.bind(null,264))}));t.default=function(){return Object(x.jsx)(r.Fragment,{children:Object(x.jsx)(L.b,{children:Object(x.jsxs)(O.b,{children:[Object(x.jsx)(M,{}),Object(x.jsx)(E.a,{children:Object(x.jsxs)(r.Suspense,{fallback:Object(x.jsx)(v.a,{loaderText:"Wettervorhersage-UI wird geladen"}),children:[Object(x.jsx)(J,{}),Object(x.jsx)(P,{})]})})]})})})}}}]);
//# sourceMappingURL=6.4e7a7085.chunk.js.map